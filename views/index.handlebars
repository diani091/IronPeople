<div class="container">
  <div class="row">
    {{#each clothes}}
    <div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-6 collections">
      <a href="/{{this.dataValues.item_name}}" class="block2-name dis-block s-text3 p-b-5">
        <img src="/images/{{this.dataValues.item_name}}.png" class="img-fluid" alt="IMG-PRODUCT">
      </a>
      <ul id="example-list" class="list-group">
        <li id="{{this.dataValues.id}}" class="list-group-item {{this.dataValues.type}}">
          <a href="/{{this.dataValues.item_name}}">{{this.dataValues.item_name}}</a>
        </li>

        <div class="form-group">
          <label for="sel1">Sizes:</label>
          <select class="form-control" id="sel-{{this.dataValues.id}}">
            {{#each this.dataValues.Sizes}} {{#if this.quantity}}
            <option>{{this.size}}</option>
            {{/if}} {{/each}}
          </select>
        </div>

        <li class="list-group-item">
          {{#if this.dataValues.discount}}
          <span class="block2-price m-text6 p-r-5">
            <strike>$ {{this.dataValues.regular_price}}</strike>
          </span>
          {{/if}}
          <span class="block2-price m-text6 p-r-5">
            $ {{this.dataValues.final_price}}
          </span>
        </li>

      </ul>


      <button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4 add-to-bag" data-id="{{this.dataValues.id}}">
        Add to Bag
      </button>
    </div>
    {{/each}}
  </div>
</div>



<!-- JS script -->
<script>
  $(document).ready(function () {
    //when clicking Add to Bag button
    $(document).on("click", ".add-to-bag", addToBag);

    //Function to add to Bag
    function addToBag(event) {
      var prodId = event.currentTarget.attributes["1"].value;
      var selector = "#sel-" + prodId + " option:selected";
      var size = $(selector)[0].text;

      if (sessionStorage.getItem("product")) {
        var storageData = JSON.parse(sessionStorage.getItem("product"));
        storageData.push({
          id: prodId,
          size: size
        });
        console.log(storageData);
        sessionStorage.setItem("product", JSON.stringify(storageData));
      } else {
        sessionStorage.setItem("product", JSON.stringify([{
          id: prodId,
          size: size
        }]));
      }

      
    }

  });


</script>